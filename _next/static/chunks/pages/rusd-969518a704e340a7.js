(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{81700:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rusd",function(){return l(274)}])},274:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return H}});var r=l(85893),t=l(55581),a=l(82770),o=l(67294),i=l(3365),s=l(39987),d=l(17988),c=l(3718),u=l(77349),m=l(15715),x=l(4647),h=l(50053),j=l(3944),Z=l(58918),g=l(22543),p=l(20901),C=l(3779),b=l(2593);let w=()=>{let e=(0,o.useContext)(a.J),n=e.getRawBalance(),l=e.getRawInsuranceAllowance(),[t,Z]=o.useState(n||new C.Z(b.O$.from(0),18)),g=e.getUserInssurances(),w=new Date(new Date().setMonth(new Date().getMonth()+2)),[f,S]=o.useState(w),y=(0,i.Z)(),H=e.stakeRawCallback(t,f,(0,p.lZ)(y)),v=e.getNewRawAllowanceCallback(t,(0,p.lZ)(y));return(0,r.jsxs)(s.Z,{bordered:!0,shaded:!0,header:"Staking",children:[(0,r.jsxs)("p",{children:["Stake RAW tokens to insure your collateral from debt pool losses. The longer the lock time, the greater the percentage of your insurance can be reimbursed (min 30 days, max 730 days).",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{style:{color:"orange"},children:"WARNING: Insurance can be returned only after the expiration of the lock."})]}),(0,r.jsx)("hr",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"RAW amount"}),(0,r.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,r.jsx)(c.Z.Button,{onClick:()=>Z(new C.Z(t.amount.sub(b.O$.from(10).pow(t.decimals+1)),t.decimals)),children:"-"}),(0,r.jsx)(u.Z,{className:"no-arrows-input-number",value:t.toHumanString(2),onChange:e=>Z(C.Z.fromString("string"==typeof e?e:e.toString(),t.decimals))}),(0,r.jsx)(c.Z.Button,{onClick:()=>Z(new C.Z(t.amount.add(b.O$.from(10).pow(t.decimals+1)),t.decimals)),children:"+"})]}),(0,r.jsxs)(d.Z.HelpText,{children:["Balance: ",null==n?void 0:n.toHumanString(4)]}),(0,r.jsxs)(d.Z.HelpText,{children:["Allowance: ",null==l?void 0:l.toHumanString(4)]})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"Unlock date"}),(0,r.jsx)(m.Z,{style:{marginTop:5,marginBottom:5},format:"yyyy-MM-dd",ranges:[],block:!0,defaultValue:w,onChange:S})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(x.Z,{justified:!0,children:[(0,r.jsx)(h.Z,{style:{backgroundColor:"#089a81",borderWidth:2},appearance:"primary",color:"green",disabled:parseFloat(null==l?void 0:l.toHumanString(18))>=parseFloat(null==t?void 0:t.toHumanString(18)),onClick:async()=>v(),children:(0,r.jsx)("b",{children:"Approve"})}),(0,r.jsx)(h.Z,{style:{backgroundColor:"#089a81",borderWidth:2},disabled:parseFloat(null==l?void 0:l.toHumanString(18))<parseFloat(null==t?void 0:t.toHumanString(18)),appearance:"primary",color:"green",onClick:async()=>H(),children:(0,r.jsx)("b",{children:"Stake"})})]}),(0,r.jsx)("hr",{}),(0,r.jsxs)(j.Z,{rowHeight:60,autoHeight:!0,style:{borderRadius:10},cellBordered:!0,data:g,renderEmpty:()=>(0,r.jsxs)("span",{style:{alignContent:"center"},children:[(0,r.jsx)("br",{}),"No any insurances"]}),children:[(0,r.jsxs)(j.Z.Column,{verticalAlign:"middle",width:170,align:"left",fixed:!0,flexGrow:1,children:[(0,r.jsx)(j.Z.HeaderCell,{children:"ID"}),(0,r.jsx)(j.Z.Cell,{dataKey:"id"})]}),(0,r.jsxs)(j.Z.Column,{verticalAlign:"middle",width:100,flexGrow:1,children:[(0,r.jsx)(j.Z.HeaderCell,{children:"RAW Locked"}),(0,r.jsx)(j.Z.Cell,{dataKey:"rawLocked"})]}),(0,r.jsxs)(j.Z.Column,{verticalAlign:"middle",width:200,flexGrow:1,children:[(0,r.jsx)(j.Z.HeaderCell,{children:"Locked At"}),(0,r.jsx)(j.Z.Cell,{dataKey:"lockedAt"})]}),(0,r.jsxs)(j.Z.Column,{verticalAlign:"middle",width:150,flexGrow:1,children:[(0,r.jsx)(j.Z.HeaderCell,{children:"Available At"}),(0,r.jsx)(j.Z.Cell,{dataKey:"availableAt"})]}),(0,r.jsxs)(j.Z.Column,{verticalAlign:"middle",width:150,flexGrow:1,children:[(0,r.jsx)(j.Z.HeaderCell,{children:"RAW Repaid"}),(0,r.jsx)(j.Z.Cell,{dataKey:"rawRepaid"})]}),(0,r.jsxs)(j.Z.Column,{verticalAlign:"middle",width:150,flexGrow:1,children:[(0,r.jsx)(j.Z.HeaderCell,{children:"Available RAW Compensation"}),(0,r.jsx)(j.Z.Cell,{dataKey:"availableCompensationString"})]}),(0,r.jsxs)(j.Z.Column,{verticalAlign:"middle",width:150,flexGrow:1,children:[(0,r.jsx)(j.Z.HeaderCell,{children:"#"}),(0,r.jsx)(j.Z.Cell,{dataKey:"unstakeButton"})]})]})]})},f=()=>{let e=o.useContext(a.J),n=(0,i.Z)(),l=e.getWethAllowance(),t=e.getRusdBalance(),m=e.getWethBalance(),[j,Z]=o.useState(m||new C.Z(b.O$.from(0),18)),[g,w]=o.useState(t||new C.Z(b.O$.from(0),18)),f=e.getNewWethAllowanceCallback(j,(0,p.lZ)(n)),S=e.getMintCallback(g,j,(0,p.lZ)(n));return(0,r.jsxs)(s.Z,{bordered:!0,shaded:!0,header:"Mint rUSD",children:[(0,r.jsx)("p",{children:"Deposit WXDC as a collateral and get rUSD in return. Resulting collateral ratio should be greater than min collateral ratio"}),(0,r.jsx)("hr",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"rUSD amount"}),(0,r.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,r.jsx)(c.Z.Button,{onClick:()=>w(new C.Z(g.amount.sub(b.O$.from(10).pow(18)),g.decimals)),children:"-"}),(0,r.jsx)(u.Z,{className:"no-arrows-input-number",step:.1,value:null==g?void 0:g.toHumanString(18),onChange(e){console.log("DOT",e,C.Z.fromString("string"==typeof e?e:e.toString(),18).toHumanString(18)),w(C.Z.fromString("string"==typeof e?e:e.toString(),18))}}),(0,r.jsx)(c.Z.Button,{onClick:()=>w(new C.Z(g.amount.add(b.O$.from(10).pow(18)),18)),children:"+"})]}),(0,r.jsxs)(d.Z.HelpText,{children:["Balance: ",null==t?void 0:t.toHumanString(5)]})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"WXDC amount"}),(0,r.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,r.jsx)(c.Z.Button,{onClick:()=>Z(new C.Z(j.amount.sub(b.O$.from(10).pow(j.decimals-1)),j.decimals)),children:"-"}),(0,r.jsx)(u.Z,{className:"no-arrows-input-number",step:.1,value:j.toHumanString(18),onChange:e=>Z(C.Z.fromString("string"==typeof e?e:e.toString(),j.decimals))}),(0,r.jsx)(c.Z.Button,{onClick:()=>Z(new C.Z(j.amount.add(b.O$.from(10).pow(j.decimals-1)),j.decimals)),children:"+"})]}),(0,r.jsxs)(d.Z.HelpText,{children:["Balance: ",null==m?void 0:m.toHumanString(6)]}),(0,r.jsxs)(d.Z.HelpText,{children:["Allowance: ",null==l?void 0:l.toHumanString(2)]}),(0,r.jsx)("hr",{}),(0,r.jsxs)(d.Z.HelpText,{children:["Current C-ratio: ",e.getCurrentCRatio(),"%"]}),(0,r.jsxs)(d.Z.HelpText,{children:["New C-ratio:"," ",e.predictCollateralRatio(g,j,!0),"%"]}),(0,r.jsxs)(d.Z.HelpText,{children:["Min C-ratio: ",e.getMinCRatio(),"%"]})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(x.Z,{justified:!0,children:[(0,r.jsx)(h.Z,{appearance:"ghost",disabled:parseFloat(null==l?void 0:l.toHumanString(18))>=parseFloat(null==j?void 0:j.toHumanString(18)),style:{marginBottom:7,borderWidth:2},onClick:async()=>f(),children:(0,r.jsx)("b",{children:"Approve"})}),(0,r.jsx)(h.Z,{appearance:"ghost",disabled:parseFloat(null==l?void 0:l.toHumanString(18))<parseFloat(null==j?void 0:j.toHumanString(18)),style:{marginBottom:7,borderWidth:2},async onClick(){console.log(123123),S()},children:(0,r.jsx)("b",{children:"Mint"})})]})]})},S=()=>{var e;let n=o.useContext(a.J),l=n.getRusdBalance(),t=n.getWethBalance(),m=n.wethLocked(),x=n.rawRepay(),j=n.getRawPrice(),g=n.getMinCRatio(),w=n.userDebt();new C.Z(b.O$.from(0),18);let[f,S]=o.useState(l||new C.Z(b.O$.from(0),18)),y=(0,i.Z)(),[H,v]=o.useState(t||new C.Z(b.O$.from(0),18)),[k,B]=o.useState(null),A=n.getUserInssurances(),T=n.predictCollateralRatio(new C.Z(b.O$.from(0),18),H,!1),W=n.predictCollateralRatio(f,new C.Z(b.O$.from(0),18),!1),R=n.getBurnRusdCallback(f,k||"0x0000000000000000000000000000000000000000000000000000000000000000",(0,p.lZ)(y)),D=n.unlockWethCallback(H,(0,p.lZ)(y));return(0,r.jsxs)(s.Z,{bordered:!0,shaded:!0,header:"Burn rUSD",children:[(0,r.jsx)("p",{children:"Burn rUSD to increase your collateral ratio and get ability to withdraw collateral in WXDC. You can choose insurance to repay your debt pool losses in RAW."}),(0,r.jsx)("hr",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"Burn rUSD amount"}),(0,r.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,r.jsx)(c.Z.Button,{onClick:()=>S(new C.Z(f.amount.sub(b.O$.from(10).pow(f.decimals)),f.decimals)),children:"-"}),(0,r.jsx)(u.Z,{className:"no-arrows-input-number",step:.1,value:f.toHumanString(18),onChange:e=>S(C.Z.fromString("string"==typeof e?e:e.toString(),f.decimals))}),(0,r.jsx)(c.Z.Button,{onClick:()=>S(new C.Z(f.amount.add(b.O$.from(10).pow(f.decimals)),f.decimals)),children:"+"})]}),(0,r.jsxs)(d.Z.HelpText,{children:["Current balance: ",null==l?void 0:l.toHumanString(2)]}),(0,r.jsxs)(d.Z.HelpText,{children:["New balance: ",new C.Z(null!==(e=null==l?void 0:l.amount.sub(null==f?void 0:f.amount))&&void 0!==e?e:b.O$.from(0),18).toHumanString(2)]}),(0,r.jsxs)(d.Z.HelpText,{children:["Your rUSD debt: ",null==w?void 0:w.toHumanString(2)]})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"Insurance rUSD amount"}),(0,r.jsx)("div",{style:{marginTop:5,marginBottom:5},children:(0,r.jsx)(Z.Z,{label:"Insurance",data:A.map(e=>{var n;return{label:"".concat(e.id.slice(0,6),"... (Max: ").concat(null===(n=e.availableCompensation)||void 0===n?void 0:n.toHumanString(4)," RAW)"),value:e.id}}),onChange:B,block:!0,defaultValue:"0x0000000000000000000000000000000000000000000000000000000000000000"})}),(0,r.jsxs)(d.Z.HelpText,{children:["Max RAW compensation: ",j&&x?x.amount.div(j.amount).toNumber():0," (",null==x?void 0:x.toHumanString(4),"$, price: ",null==j?void 0:j.toHumanString(5),"$)"]}),(0,r.jsxs)(d.Z.HelpText,{children:["New C-ratio: ",W,"%"]}),(0,r.jsxs)(d.Z.HelpText,{children:["Min C-ratio: ",g,"%"]})]}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{color:"orange",appearance:"ghost",block:!0,style:{marginBottom:7,borderWidth:2},onClick:async()=>R(),children:(0,r.jsx)("b",{children:"Burn rUSD"})}),(0,r.jsx)("hr",{}),(0,r.jsx)("p",{children:"Withdraw WXDC collateral (this decreases collateral ratio)."}),(0,r.jsx)("br",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"Unlock WXDC"}),(0,r.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,r.jsx)(c.Z.Button,{onClick:()=>v(new C.Z(H.amount.sub(b.O$.from(10).pow(H.decimals-1)),H.decimals)),children:"-"}),(0,r.jsx)(u.Z,{className:"no-arrows-input-number",step:.01,value:H.toHumanString(18),onChange:e=>v(C.Z.fromString("string"==typeof e?e:e.toString(),H.decimals))}),(0,r.jsx)(c.Z.Button,{onClick:()=>v(new C.Z(H.amount.add(b.O$.from(10).pow(H.decimals-1)),H.decimals)),children:"+"})]}),(0,r.jsxs)(d.Z.HelpText,{children:["Locked WXDC Amount: ",null==m?void 0:m.toHumanString(5)]}),(0,r.jsxs)(d.Z.HelpText,{children:["Current balance: ",null==t?void 0:t.toHumanString(5)]}),(0,r.jsxs)(d.Z.HelpText,{children:["New C-ratio: ",T,"%"]}),(0,r.jsxs)(d.Z.HelpText,{children:["Min C-ratio: ",g,"%"]})]}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{color:"violet",appearance:"ghost",block:!0,style:{marginBottom:7,borderWidth:2,borderColor:"#b6a1e3",color:"#b6a1e3"},onClick:async()=>D(),children:(0,r.jsx)("b",{children:"Withdraw WXDC"})})]})},y=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{justify:"space-around",children:(0,r.jsx)(g.Z.Item,{colspan:23,children:(0,r.jsx)(w,{})})}),(0,r.jsx)("br",{}),(0,r.jsxs)(g.Z,{justify:"space-around",children:[(0,r.jsx)(g.Z.Item,{colspan:11,children:(0,r.jsx)(f,{})}),(0,r.jsx)(g.Z.Item,{colspan:11,children:(0,r.jsx)(S,{})})]})]});function H(){return(0,r.jsx)(t.Z,{active:"rusd",children:(0,r.jsx)("div",{style:{padding:20},children:(0,r.jsx)(y,{})})})}}},function(e){e.O(0,[801,681,358,581,774,888,179],function(){return e(e.s=81700)}),_N_E=e.O()}]);